<h2 class="text-3xl font-bold mb-4">Chapter 0.5: Repeating Actions with Loops</h2>
<p>Sometimes you need to repeat an action multiple times. Imagine you want to spawn 5 explosive barrels. You could write:</p>
<pre><code class="language-squirrel">printl("Spawning green barrel number 1")
printl("Spawning green barrel number 2")
printl("Spawning green barrel number 3")
printl("Spawning green barrel number 4")
...
</code></pre>
<p>This is repetitive and inefficient. What if you needed to spawn 100? This is where <strong>loops</strong> are essential.</p>
<h3 class="text-2xl font-bold mt-8 mb-4">The <code>for</code> Loop</h3>
<p>A <code>for</code> loop is perfect when you know exactly how many times you want to repeat an action. It has three parts in its parentheses, separated by semicolons:</p>
<ol class="list-decimal list-inside">
    <li><strong>Initializer:</strong> A temporary counter variable is created (<code>local i = 0</code>). This runs once at the very beginning.</li>
    <li><strong>Condition:</strong> The loop continues as long as this question is <code>true</code> (<code>i < 5</code>). It's checked before each repetition.</li>
    <li><strong>Incrementer:</strong> An action to perform after each repetition (<code>i++</code>, which is shorthand for <code>i = i + 1</code>).</li>
</ol>
<pre><code class="language-squirrel">// This loop will run 100 times.
for (local i = 0; i < 100; i++) {
    // The code inside these curly braces is the "loop body".
    printl("Spawning green barrel number " + i)
}
printl("All barrels spawned.")</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-nohighlight">Spawning green barrel number 0
Spawning green barrel number 1
Spawning green barrel number 2
Spawning green barrel number 3
Spawning green barrel number 4
...
Spawning green barrel number 99
All barrels spawned.</code></pre>
<p>Notice the counter <code>i</code> starts at 0 and goes up to 99. When <code>i</code> becomes 100, the condition <code>100 < 100</code> is <code>false</code>, and the loop stops.</p>
<h3 class="text-2xl font-bold mt-8 mb-4">The <code>while</code> Loop</h3>
<p>A <code>while</code> loop is used when you don't know how many repetitions you need. It repeats as long as a condition remains <code>true</code>. This is great for actions that depend on player behavior or game state.</p>
<pre><code class="language-squirrel">local playerIsInPoisonGoo = true
local playerHealth = 100

// This loop will continue as long as the player is in the goo.
while (playerIsInPoisonGoo == true) {
    playerHealth -= 0.1 // Damage the player
    printl("Player health is now: " + playerHealth)
    
    // In a real game, another piece of code would set playerIsInPoisonGoo to false.
    // For this example, let's just stop it manually after some damage.
    if (playerHealth <= 70) {
        playerIsInPoisonGoo = false
    }
}
printl("Player has escaped the goo!")</code></pre>
<p class="p-4 bg-red-100 dark:bg-red-900 border-l-4 border-red-500 rounded-r-lg"><strong>Beware of infinite loops!</strong> If the condition in a <code>while</code> loop <em>never</em> becomes false, it will freeze the script's execution, leading to a potential game hang or crash.</p>

<div class="mt-4 p-4 bg-yellow-100 dark:bg-yellow-900 border-l-4 border-yellow-500 rounded-r-lg">
    <strong>A Critical VScript Concept: No "Waiting" in Loops</strong><br><br>
    The poison goo example works because the condition to stop the loop (<code>playerHealth <= 70</code>) is <em>inside the loop itself</em>. It's crucial to understand that VScript code is <strong>synchronous</strong>â€”it has a one-track mind and can only do one thing at a time.<br><br>
    While your <code>while</code> loop is running, the entire script execution is paused on that loop. This means you <strong>cannot</strong> use a <code>while</code> loop to wait for an external event, like a player pressing a button or leaving a trigger zone. The code that checks if the player has left the zone will never get a chance to run!<br><br>
    If you need to wait for a change in game state, use these event-driven patterns instead:
    <ul class="list-disc list-inside ml-4 mt-2">
        <li><strong>Think Functions:</strong> To check something at a regular interval.</li>
        <li><strong>Delayed <code>EntFire</code> calls or logic_timer:</strong> To schedule a single action in the future.</li>
        <li><strong>ActionScheduler:</strong> (PCapture-Lib) For complex timed sequences.</li>
    </ul>
</div>